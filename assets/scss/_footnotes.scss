@use "config" as *;

/* Override Littlefoot's internal variable system */
.littlefoot {
  --popover-background-color: var(--bg-secondary);
  --popover-text-color: var(--fg);
  --popover-border: 1px solid var(--border);

  --button-background-color: var(--bg-secondary);
  --button-text-color: var(--link);
  --button-active-background-color: var(--link);
  --button-active-text-color: var(--bg-secondary);

  --popover-font-family: #{$sans-serif};
  --popover-font-size: 0.95rem;
  --popover-line-height: #{$body-line-height};
}

/* Force styles on marker buttons to ensure theme persistence */
.littlefoot__button {
  border: 1px solid var(--border) !important;
  font-family: $mono !important;
  font-weight: bold !important;
  transition: var(--transition) !important;

  &:where(:hover, :focus),
  &.is-active {
    background-color: var(--link) !important;
    color: var(--bg) !important;
    border-color: var(--link) !important;
  }
}

/* Deep overrides for the popover components */
.littlefoot__popover {
  background-color: var(--popover-background-color) !important;

  .littlefoot__wrapper {
    background-color: var(--popover-background-color) !important;
    color: var(--popover-text-color) !important;
    box-shadow: none !important;
  }

  .littlefoot__content {
    background-color: var(--popover-background-color) !important;
    color: var(--popover-text-color) !important;
    padding: 14px 20px !important;
  }

  .littlefoot__tooltip {
    background-color: var(--popover-background-color) !important;
    border: 1px solid var(--border) !important;
  }
}

/* Fallback for standard Hugo footnotes at bottom of page */
.footnotes {
  margin-top: 4rem;
  font-size: 0.85rem;
  color: var(--fg-secondary);
  border-top: 1px solid var(--border);
  padding-top: 1.5rem;

  hr {
    display: none;
  }

  ol {
    padding-inline-start: 1.5rem;
  }

  li {
    margin-bottom: 0.5rem;
  }

  .footnote-backref {
    text-decoration: none;
    margin-inline-start: 5px;
    font-size: 0.75rem;
    opacity: 0.6;

    &:hover {
      opacity: 1;
    }
  }
}
